<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Porolog::Goal
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Porolog::Goal";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Porolog.html" title="Porolog (module)">Porolog</a></span></span>
     &raquo; 
    <span class="title">Goal</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Porolog::Goal
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Porolog::Goal</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/porolog/goal.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Porolog::Goal finds solutions for specific Arguments of a Predicate.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Luis Esteban</p>
</div>
      
    </li>
  
</ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span>, <span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span>, <span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#arguments-instance_method" title="#arguments (instance method)">#<strong>arguments</strong>  &#x21d2; Porolog::Arguments </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The specific Arguments this goal is trying to solve.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#calling_goal-instance_method" title="#calling_goal (instance method)">#<strong>calling_goal</strong>  &#x21d2; Porolog::Goal </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The parent goal if this goal is a subgoal.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#index-instance_method" title="#index (instance method)">#<strong>index</strong>  &#x21d2; Integer, NilClass </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Solution index for builtin predicates.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#result-instance_method" title="#result (instance method)">#<strong>result</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether any result has been found.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">#<strong>terminate</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether this Goal is to terminate.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#goals-class_method" title="goals (class method)">.<strong>goals</strong>  &#x21d2; Array&lt;Porolog::Goal&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A convenience method for testing/debugging.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-class_method" title="reset (class method)">.<strong>reset</strong>  &#x21d2; true </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears all goals and ensures they are deleted.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_deleted-instance_method" title="#check_deleted (instance method)">#<strong>check_deleted</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Determines whether the Goal has been deleted and removes its Variables if
it has.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deleted%3F-instance_method" title="#deleted? (instance method)">#<strong>deleted?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether the Goal has been deleted (memoized).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(arguments, calling_goal = nil)  &#x21d2; Goal </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes and registers the Goal.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#solve-instance_method" title="#solve (instance method)">#<strong>solve</strong>(number_of_solutions = nil)  &#x21d2; Array&lt;Hash{Symbol =&gt; Object}&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finds all possible solutions to the Predicate for the specific Arguments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value_of-instance_method" title="#value_of (instance method)">#<strong>value_of</strong>(name, _index = nil, visited = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of the indicated variable or value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variable-instance_method" title="#variable (instance method)">#<strong>variable</strong>(name)  &#x21d2; Porolog::Variable, Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finds or tries to create a variable in the goal (as much as possible)
otherwise passes the parameter back.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variables-instance_method" title="#variables (instance method)">#<strong>variables</strong>  &#x21d2; Hash{Symbol =&gt; Object} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Variables and their current values of this Goal.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(arguments, calling_goal = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes and registers the Goal.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>arguments</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Porolog::Arguments</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Predicate Arguments that this Goal is to solve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>calling_goal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the parent Goal if this Goal is a subgoal.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
  <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
  <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
  
  <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
  
  <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="arguments=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="arguments-instance_method">
  
    #<strong>arguments</strong>  &#x21d2; <tt><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Porolog::Arguments</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The specific Arguments this goal is trying to solve.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Porolog::Arguments</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The specific Arguments this goal is trying to solve.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 22</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Goal error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>        <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating an unexpected type of Rule definition.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span></span>  <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating a non-Variable was attempted to be instantiated.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='comment'># Clears all goals and ensures they are deleted.
</span>  <span class='comment'># @return [true]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
    <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
    <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:calling_goal</span><span class='comma'>,</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:result</span>
  
  <span class='comment'># Initializes and registers the Goal.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Predicate Arguments that this Goal is to solve.
</span>  <span class='comment'># @param calling_goal [Porolog::Goal] the parent Goal if this Goal is a subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
    <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
    
    <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
    
    <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># A convenience method for testing/debugging.
</span>  <span class='comment'># @return [Array&lt;Porolog::Goal&gt;]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
    <span class='cvar'>@@goals</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Boolean] whether the Goal has been deleted (memoized)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
    <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='ivar'>@deleted</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Determines whether the Goal has been deleted and removes its Variables if it has
</span>  <span class='comment'># @return [Boolean] whether the Goal has been deleted
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Hash{Symbol =&gt; Object}] the Variables and their current values of this Goal
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
      <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds or tries to create a variable in the goal (as much as possible) otherwise passes the parameter back.
</span>  <span class='comment'># @param name [Object] name of variable or variable
</span>  <span class='comment'># @return [Porolog::Variable, Object] a variable of the goal or the original parameter
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='comment'># -- Return parameter if it is not a variable --
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Returns the value of the indicated variable or value
</span>  <span class='comment'># @param name [Symbol, Object] name of the variable or value
</span>  <span class='comment'># @param _index [Object] index is not used, it is for polymorphic compatibility with other classes
</span>  <span class='comment'># @param visited [Array] used to avoid infinite recursion
</span>  <span class='comment'># @return [Object] the value
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds all possible solutions to the Predicate for the specific Arguments.
</span>  <span class='comment'># @param number_of_solutions [Integer] if provided, the search is stopped once the number of solutions has been found
</span>  <span class='comment'># @return [Array&lt;Hash{Symbol =&gt; Object}&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
      <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
        <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
        <span class='kw'>return</span> <span class='ivar'>@solutions</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># TODO: Delete all descendent goals
</span>    
    <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="calling_goal=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="calling_goal-instance_method">
  
    #<strong>calling_goal</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The parent goal if this goal is a subgoal.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parent goal if this goal is a subgoal.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 22</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Goal error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>        <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating an unexpected type of Rule definition.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span></span>  <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating a non-Variable was attempted to be instantiated.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='comment'># Clears all goals and ensures they are deleted.
</span>  <span class='comment'># @return [true]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
    <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
    <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:calling_goal</span><span class='comma'>,</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:result</span>
  
  <span class='comment'># Initializes and registers the Goal.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Predicate Arguments that this Goal is to solve.
</span>  <span class='comment'># @param calling_goal [Porolog::Goal] the parent Goal if this Goal is a subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
    <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
    
    <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
    
    <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># A convenience method for testing/debugging.
</span>  <span class='comment'># @return [Array&lt;Porolog::Goal&gt;]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
    <span class='cvar'>@@goals</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Boolean] whether the Goal has been deleted (memoized)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
    <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='ivar'>@deleted</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Determines whether the Goal has been deleted and removes its Variables if it has
</span>  <span class='comment'># @return [Boolean] whether the Goal has been deleted
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Hash{Symbol =&gt; Object}] the Variables and their current values of this Goal
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
      <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds or tries to create a variable in the goal (as much as possible) otherwise passes the parameter back.
</span>  <span class='comment'># @param name [Object] name of variable or variable
</span>  <span class='comment'># @return [Porolog::Variable, Object] a variable of the goal or the original parameter
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='comment'># -- Return parameter if it is not a variable --
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Returns the value of the indicated variable or value
</span>  <span class='comment'># @param name [Symbol, Object] name of the variable or value
</span>  <span class='comment'># @param _index [Object] index is not used, it is for polymorphic compatibility with other classes
</span>  <span class='comment'># @param visited [Array] used to avoid infinite recursion
</span>  <span class='comment'># @return [Object] the value
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds all possible solutions to the Predicate for the specific Arguments.
</span>  <span class='comment'># @param number_of_solutions [Integer] if provided, the search is stopped once the number of solutions has been found
</span>  <span class='comment'># @return [Array&lt;Hash{Symbol =&gt; Object}&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
      <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
        <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
        <span class='kw'>return</span> <span class='ivar'>@solutions</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># TODO: Delete all descendent goals
</span>    
    <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="index=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="index-instance_method">
  
    #<strong>index</strong>  &#x21d2; <tt>Integer</tt>, <tt>NilClass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Solution index for builtin predicates.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Solution index for builtin predicates.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 22</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Goal error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>        <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating an unexpected type of Rule definition.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span></span>  <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating a non-Variable was attempted to be instantiated.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='comment'># Clears all goals and ensures they are deleted.
</span>  <span class='comment'># @return [true]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
    <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
    <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:calling_goal</span><span class='comma'>,</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:result</span>
  
  <span class='comment'># Initializes and registers the Goal.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Predicate Arguments that this Goal is to solve.
</span>  <span class='comment'># @param calling_goal [Porolog::Goal] the parent Goal if this Goal is a subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
    <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
    
    <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
    
    <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># A convenience method for testing/debugging.
</span>  <span class='comment'># @return [Array&lt;Porolog::Goal&gt;]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
    <span class='cvar'>@@goals</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Boolean] whether the Goal has been deleted (memoized)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
    <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='ivar'>@deleted</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Determines whether the Goal has been deleted and removes its Variables if it has
</span>  <span class='comment'># @return [Boolean] whether the Goal has been deleted
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Hash{Symbol =&gt; Object}] the Variables and their current values of this Goal
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
      <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds or tries to create a variable in the goal (as much as possible) otherwise passes the parameter back.
</span>  <span class='comment'># @param name [Object] name of variable or variable
</span>  <span class='comment'># @return [Porolog::Variable, Object] a variable of the goal or the original parameter
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='comment'># -- Return parameter if it is not a variable --
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Returns the value of the indicated variable or value
</span>  <span class='comment'># @param name [Symbol, Object] name of the variable or value
</span>  <span class='comment'># @param _index [Object] index is not used, it is for polymorphic compatibility with other classes
</span>  <span class='comment'># @param visited [Array] used to avoid infinite recursion
</span>  <span class='comment'># @return [Object] the value
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds all possible solutions to the Predicate for the specific Arguments.
</span>  <span class='comment'># @param number_of_solutions [Integer] if provided, the search is stopped once the number of solutions has been found
</span>  <span class='comment'># @return [Array&lt;Hash{Symbol =&gt; Object}&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
      <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
        <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
        <span class='kw'>return</span> <span class='ivar'>@solutions</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># TODO: Delete all descendent goals
</span>    
    <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="result=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="result-instance_method">
  
    #<strong>result</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Whether any result has been found.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether any result has been found.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 22</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Goal error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>        <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating an unexpected type of Rule definition.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span></span>  <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating a non-Variable was attempted to be instantiated.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='comment'># Clears all goals and ensures they are deleted.
</span>  <span class='comment'># @return [true]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
    <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
    <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:calling_goal</span><span class='comma'>,</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:result</span>
  
  <span class='comment'># Initializes and registers the Goal.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Predicate Arguments that this Goal is to solve.
</span>  <span class='comment'># @param calling_goal [Porolog::Goal] the parent Goal if this Goal is a subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
    <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
    
    <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
    
    <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># A convenience method for testing/debugging.
</span>  <span class='comment'># @return [Array&lt;Porolog::Goal&gt;]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
    <span class='cvar'>@@goals</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Boolean] whether the Goal has been deleted (memoized)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
    <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='ivar'>@deleted</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Determines whether the Goal has been deleted and removes its Variables if it has
</span>  <span class='comment'># @return [Boolean] whether the Goal has been deleted
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Hash{Symbol =&gt; Object}] the Variables and their current values of this Goal
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
      <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds or tries to create a variable in the goal (as much as possible) otherwise passes the parameter back.
</span>  <span class='comment'># @param name [Object] name of variable or variable
</span>  <span class='comment'># @return [Porolog::Variable, Object] a variable of the goal or the original parameter
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='comment'># -- Return parameter if it is not a variable --
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Returns the value of the indicated variable or value
</span>  <span class='comment'># @param name [Symbol, Object] name of the variable or value
</span>  <span class='comment'># @param _index [Object] index is not used, it is for polymorphic compatibility with other classes
</span>  <span class='comment'># @param visited [Array] used to avoid infinite recursion
</span>  <span class='comment'># @return [Object] the value
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds all possible solutions to the Predicate for the specific Arguments.
</span>  <span class='comment'># @param number_of_solutions [Integer] if provided, the search is stopped once the number of solutions has been found
</span>  <span class='comment'># @return [Array&lt;Hash{Symbol =&gt; Object}&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
      <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
        <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
        <span class='kw'>return</span> <span class='ivar'>@solutions</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># TODO: Delete all descendent goals
</span>    
    <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="terminate=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="terminate-instance_method">
  
    #<strong>terminate</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Whether this Goal is to terminate.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether this Goal is to terminate.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 22</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Goal (class)">Goal</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Goal error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>        <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating an unexpected type of Rule definition.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/DefinitionError.html" title="Porolog::Goal::DefinitionError (class)">DefinitionError</a></span></span>  <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating a non-Variable was attempted to be instantiated.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Goal/NotVariableError.html" title="Porolog::Goal::NotVariableError (class)">NotVariableError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Goal/GoalError.html" title="Porolog::Goal::GoalError (class)">GoalError</a></span></span>    <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='comment'># Clears all goals and ensures they are deleted.
</span>  <span class='comment'># @return [true]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
    <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
    <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbol'>:calling_goal</span><span class='comma'>,</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:result</span>
  
  <span class='comment'># Initializes and registers the Goal.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Predicate Arguments that this Goal is to solve.
</span>  <span class='comment'># @param calling_goal [Porolog::Goal] the parent Goal if this Goal is a subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>    <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@terminate</span>    <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@calling_goal</span> <span class='op'>=</span> <span class='id identifier rubyid_calling_goal'>calling_goal</span>
    <span class='ivar'>@variables</span>    <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@result</span>       <span class='op'>=</span> <span class='kw'>false</span>
    
    <span class='ivar'>@arguments</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Arguments</a></span></span><span class='rparen'>)</span>
    
    <span class='cvar'>@@goals</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># A convenience method for testing/debugging.
</span>  <span class='comment'># @return [Array&lt;Porolog::Goal&gt;]
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
    <span class='cvar'>@@goals</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Boolean] whether the Goal has been deleted (memoized)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
    <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='ivar'>@deleted</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Determines whether the Goal has been deleted and removes its Variables if it has
</span>  <span class='comment'># @return [Boolean] whether the Goal has been deleted
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
    <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
      <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [Hash{Symbol =&gt; Object}] the Variables and their current values of this Goal
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
      <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds or tries to create a variable in the goal (as much as possible) otherwise passes the parameter back.
</span>  <span class='comment'># @param name [Object] name of variable or variable
</span>  <span class='comment'># @return [Porolog::Variable, Object] a variable of the goal or the original parameter
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='comment'># -- Return parameter if it is not a variable --
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
      <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
    <span class='kw'>end</span>
    
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Returns the value of the indicated variable or value
</span>  <span class='comment'># @param name [Symbol, Object] name of the variable or value
</span>  <span class='comment'># @param _index [Object] index is not used, it is for polymorphic compatibility with other classes
</span>  <span class='comment'># @param visited [Array] used to avoid infinite recursion
</span>  <span class='comment'># @return [Object] the value
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_value'>value</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Finds all possible solutions to the Predicate for the specific Arguments.
</span>  <span class='comment'># @param number_of_solutions [Integer] if provided, the search is stopped once the number of solutions has been found
</span>  <span class='comment'># @return [Array&lt;Hash{Symbol =&gt; Object}&gt;]
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
      <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
        <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>
      
      <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
        <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
        <span class='kw'>return</span> <span class='ivar'>@solutions</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># TODO: Delete all descendent goals
</span>    
    <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="goals-class_method">
  
    .<strong>goals</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="Porolog::Goal (class)">Porolog::Goal</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A convenience method for testing/debugging.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Porolog::Goal (class)">Porolog::Goal</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 63</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_goals'>goals</span>
  <span class='cvar'>@@goals</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset-class_method">
  
    .<strong>reset</strong>  &#x21d2; <tt>true</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears all goals and ensures they are deleted.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 33</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
  <span class='cvar'>@@goals</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_goals'>goals</span> <span class='op'>=</span> <span class='cvar'>@@goals</span>
  <span class='cvar'>@@goals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_goals'>goals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:deleted?</span><span class='rparen'>)</span>
  <span class='cvar'>@@cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_deleted-instance_method">
  
    #<strong>check_deleted</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Determines whether the Goal has been deleted and removes its Variables if
it has</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>whether the Goal has been deleted</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
  <span class='kw'>if</span> <span class='cvar'>@@goals</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
      <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deleted?-instance_method">
  
    #<strong>deleted?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns whether the Goal has been deleted (memoized)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>whether the Goal has been deleted (memoized)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deleted?'>deleted?</span>
  <span class='ivar'>@deleted</span> <span class='op'>||=</span> <span class='id identifier rubyid_check_deleted'>check_deleted</span>
  <span class='ivar'>@deleted</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="solve-instance_method">
  
    #<strong>solve</strong>(number_of_solutions = nil)  &#x21d2; <tt>Array&lt;Hash{Symbol =&gt; Object}&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finds all possible solutions to the Predicate for the specific Arguments.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>number_of_solutions</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if provided, the search is stopped once the number of solutions has been
found</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Hash{Symbol =&gt; Object}&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_solve'>solve</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_variables'>variables</span> <span class='op'>=</span> <span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span>
  
  <span class='id identifier rubyid_external_variables'>external_variables</span> <span class='op'>=</span> <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
  <span class='rbrace'>}</span>
  
  <span class='id identifier rubyid_satisfy'>satisfy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_goal'>goal</span><span class='op'>|</span>
    <span class='ivar'>@result</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_external_variables'>external_variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
    
    <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_number_of_solutions'>number_of_solutions</span>
      <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
      <span class='kw'>return</span> <span class='ivar'>@solutions</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># TODO: Delete all descendent goals
</span>  
  <span class='ivar'>@solutions</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value_of-instance_method">
  
    #<strong>value_of</strong>(name, _index = nil, visited = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of the indicated variable or value</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>name of the variable or value</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>_index</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>index is not used, it is for polymorphic compatibility with other classes</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>visited</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>used to avoid infinite recursion</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the value</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__index'>_index</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_visited'>visited</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_value'>value</span>    <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='kw'>end</span>
  
  <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='id identifier rubyid_visited'>visited</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variable-instance_method">
  
    #<strong>variable</strong>(name)  &#x21d2; <tt>Porolog::Variable</tt>, <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finds or tries to create a variable in the goal (as much as possible)
otherwise passes the parameter back.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>name of variable or variable</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Porolog::Variable</tt>, <tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a variable of the goal or the original parameter</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
    <span class='comment'># -- Return parameter if it is not a variable --
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span>
  <span class='kw'>end</span>
  
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variable'>variable</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span> <span class='kw'>if</span> <span class='id identifier rubyid_variable'>variable</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span> <span class='op'>==</span> <span class='kw'>self</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_variable'>variable</span>
  <span class='kw'>end</span>
  
  <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Variable</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>||</span> <span class='const'>Variable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='ivar'>@variables</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variables-instance_method">
  
    #<strong>variables</strong>  &#x21d2; <tt>Hash{Symbol =&gt; Object}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the Variables and their current values of this Goal</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Variables and their current values of this Goal</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/goal.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_variables'>variables</span>
  <span class='ivar'>@variables</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='comma'>,</span><span class='id identifier rubyid_variable_list'>variable_list</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variable'>variable</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_internal?'>internal?</span>
    <span class='id identifier rubyid_variable_list'>variable_list</span><span class='lbracket'>[</span><span class='id identifier rubyid_variable'>variable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_value_of'>value_of</span><span class='lparen'>(</span><span class='id identifier rubyid_variable'>variable</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 24 20:17:20 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.3.4).
</div>

    </div>
  </body>
</html>
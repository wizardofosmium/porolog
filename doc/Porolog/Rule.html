<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Porolog::Rule
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Porolog::Rule";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Porolog.html" title="Porolog (module)">Porolog</a></span></span>
     &raquo; 
    <span class="title">Rule</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Porolog::Rule
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Porolog::Rule</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/porolog/rule.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Porolog::Rule is one clause of a Porolog::Predicate.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Luis Esteban</p>
</div>
      
    </li>
  
</ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span>, <span class='object_link'><a href="Rule/Error.html" title="Porolog::Rule::Error (class)">Error</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#arguments-instance_method" title="#arguments (instance method)">#<strong>arguments</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Arguments of the Predicate for which this Rule applies.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#definition-instance_method" title="#definition (instance method)">#<strong>definition</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The definition of the Rule.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-class_method" title="reset (class method)">.<strong>reset</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears all Rules.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(arguments, definition = nil)  &#x21d2; Rule </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the Rule.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Pretty representation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#myid-instance_method" title="#myid (instance method)">#<strong>myid</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convenience method for testing/debugging.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#satisfy-instance_method" title="#satisfy (instance method)">#<strong>satisfy</strong>(goal, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Try to satisfy the Rule for the given Goal.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#satisfy_conjunction-instance_method" title="#satisfy_conjunction (instance method)">#<strong>satisfy_conjunction</strong>(goal, subgoal, conjunction, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Try to satisfy the conjunction of the definition of the Rule for a given Goal.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#satisfy_definition-instance_method" title="#satisfy_definition (instance method)">#<strong>satisfy_definition</strong>(goal, subgoal, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Try to satisfy the definition of the Rule for a given Goal.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(arguments, definition = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Porolog::Rule (class)">Rule</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes the Rule.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>arguments</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Arguments.html" title="Porolog::Arguments (class)">Porolog::Arguments</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Arguments of the Predicate for which this Rule applies.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>definition</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the definition of the Rule.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@arguments</span>  <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
  <span class='ivar'>@definition</span> <span class='op'>=</span> <span class='id identifier rubyid_definition'>definition</span>
  <span class='cvar'>@@rules</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="arguments-instance_method">
  
    #<strong>arguments</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The Arguments of the Predicate for which this Rule applies.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 19</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Rule (class)">Rule</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Rule error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Rule/Error.html" title="Porolog::Rule::Error (class)">Error</a></span></span>           <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating that there is an error in the definition of the Rule.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Rule/Error.html" title="Porolog::Rule::Error (class)">Error</a></span></span>        <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:definition</span>
  
  <span class='comment'># Clears all Rules.
</span>  <span class='comment'># @return [Boolean] success
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@rules</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='comment'># Initializes the Rule.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Arguments of the Predicate for which this Rule applies.
</span>  <span class='comment'># @param definition [Object] the definition of the Rule.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>  <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@definition</span> <span class='op'>=</span> <span class='id identifier rubyid_definition'>definition</span>
    <span class='cvar'>@@rules</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Convenience method for testing/debugging
</span>  <span class='comment'># @return [String] pretty identification
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_myid'>myid</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rule</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@rules</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1000</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [String] pretty representation.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>:- </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the Rule for the given Goal.
</span>  <span class='comment'># @param goal [Porolog::Goal] the Goal in which to satisfy this Rule.
</span>  <span class='comment'># @param block [Proc] code to perform when the Rule is satisfied.
</span>  <span class='comment'># @return [Boolean] the success of deleting the subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subgoal'>subgoal</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Goal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Goal.html#initialize-instance_method" title="Porolog::Goal#initialize (method)">new</a></span></span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_goal'>goal</span>
    
    <span class='id identifier rubyid_unified_goals'>unified_goals</span> <span class='op'>=</span> <span class='id identifier rubyid_unify_goals'>unify_goals</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_unified_goals'>unified_goals</span>
      <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dead-end: Cannot unify with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the definition of the Rule for a given Goal.
</span>  <span class='comment'># @param goal [Porolog::Goal] the given Goal for the Rule.
</span>  <span class='comment'># @param subgoal [Porolog::Goal] the subgoal for the Rule&#39;s definition.
</span>  <span class='comment'># @param block [Proc] code to perform when the definition is satisfied.
</span>  <span class='comment'># @return [Boolean] whether the definition was satisfied.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='ivar'>@definition</span>
      <span class='kw'>when</span> <span class='const'>TrueClass</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
        <span class='kw'>true</span>
      
      <span class='kw'>when</span> <span class='const'>FalseClass</span>
        <span class='kw'>false</span>
      
      <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></span>
        <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='ivar'>@definition</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
          <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNEXPECTED TYPE OF DEFINITION: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the conjunction of the definition of the Rule for a given Goal.
</span>  <span class='comment'># A conjunction is a sequence of expressions where the sequence is true
</span>  <span class='comment'># if all the expressions are true.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param goal [Porolog::Goal] the given Goal for the Rule.
</span>  <span class='comment'># @param subgoal [Porolog::Goal] the subgoal for the Rule&#39;s definition.
</span>  <span class='comment'># @param conjunction [Array] the conjunction to satisfy.
</span>  <span class='comment'># @param block [Proc] code to perform when the definition is satisfied.
</span>  <span class='comment'># @return [Boolean] whether the definition was satisfied.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_arguments'>arguments</span>   <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_conjunction'>conjunction</span> <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    
    <span class='comment'># -- Handle non-Arguments --
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_arguments'>arguments</span>
      <span class='kw'>when</span> <span class='symbol'>:CUT</span><span class='comma'>,</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CUTTING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        
        <span class='kw'>if</span> <span class='id identifier rubyid_arguments'>arguments</span> <span class='op'>==</span> <span class='symbol'>:CUT</span>
          <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_terminate!'>terminate!</span>
          <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TERMINATED by </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        
        <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
        
      <span class='kw'>when</span> <span class='kw'>false</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Unify Subgoal --
</span>    <span class='id identifier rubyid_subsubgoal'>subsubgoal</span>   <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variables'>variables</span>    <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span> <span class='op'>+</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
    <span class='id identifier rubyid_unified'>unified</span>      <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    
    <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span>
      
      <span class='id identifier rubyid_unification'>unification</span> <span class='op'>=</span> <span class='id identifier rubyid_unify'>unify</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_unified'>unified</span>   <span class='op'>&amp;&amp;=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_unification'>unification</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
        <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>+=</span> <span class='id identifier rubyid_unification'>unification</span>
      <span class='kw'>else</span>
        <span class='comment'>#:nocov:
</span>        <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t unify: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> WITH </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span>
        <span class='comment'>#:nocov:
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Instantiate Unifications --
</span>    <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;=</span> <span class='id identifier rubyid_instantiate_unifications'>instantiate_unifications</span><span class='lparen'>(</span><span class='id identifier rubyid_unifications'>unifications</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
    
    <span class='comment'># -- Satisfy Subgoal --
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Uninstantiate --
</span>    <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
    
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="definition-instance_method">
  
    #<strong>definition</strong>  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The definition of the Rule.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 19</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Porolog::Rule (class)">Rule</a></span></span>
  
  <span class='comment'># Error class for rescuing or detecting any Rule error.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Rule/Error.html" title="Porolog::Rule::Error (class)">Error</a></span></span>           <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="PorologError.html" title="Porolog::PorologError (class)">PorologError</a></span></span> <span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='comment'># Error class indicating that there is an error in the definition of the Rule.
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span></span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Rule/Error.html" title="Porolog::Rule::Error (class)">Error</a></span></span>        <span class='semicolon'>;</span> <span class='kw'>end</span>
  
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:arguments</span><span class='comma'>,</span> <span class='symbol'>:definition</span>
  
  <span class='comment'># Clears all Rules.
</span>  <span class='comment'># @return [Boolean] success
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
    <span class='cvar'>@@rules</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_reset'>reset</span>
  
  <span class='comment'># Initializes the Rule.
</span>  <span class='comment'># @param arguments [Porolog::Arguments] the Arguments of the Predicate for which this Rule applies.
</span>  <span class='comment'># @param definition [Object] the definition of the Rule.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_definition'>definition</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@arguments</span>  <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='ivar'>@definition</span> <span class='op'>=</span> <span class='id identifier rubyid_definition'>definition</span>
    <span class='cvar'>@@rules</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Convenience method for testing/debugging
</span>  <span class='comment'># @return [String] pretty identification
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_myid'>myid</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rule</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@rules</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1000</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='comment'># @return [String] pretty representation.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>:- </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the Rule for the given Goal.
</span>  <span class='comment'># @param goal [Porolog::Goal] the Goal in which to satisfy this Rule.
</span>  <span class='comment'># @param block [Proc] code to perform when the Rule is satisfied.
</span>  <span class='comment'># @return [Boolean] the success of deleting the subgoal.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subgoal'>subgoal</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Goal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Goal.html#initialize-instance_method" title="Porolog::Goal#initialize (method)">new</a></span></span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_goal'>goal</span>
    
    <span class='id identifier rubyid_unified_goals'>unified_goals</span> <span class='op'>=</span> <span class='id identifier rubyid_unify_goals'>unify_goals</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_unified_goals'>unified_goals</span>
      <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dead-end: Cannot unify with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the definition of the Rule for a given Goal.
</span>  <span class='comment'># @param goal [Porolog::Goal] the given Goal for the Rule.
</span>  <span class='comment'># @param subgoal [Porolog::Goal] the subgoal for the Rule&#39;s definition.
</span>  <span class='comment'># @param block [Proc] code to perform when the definition is satisfied.
</span>  <span class='comment'># @return [Boolean] whether the definition was satisfied.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>case</span> <span class='ivar'>@definition</span>
      <span class='kw'>when</span> <span class='const'>TrueClass</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
        <span class='kw'>true</span>
      
      <span class='kw'>when</span> <span class='const'>FalseClass</span>
        <span class='kw'>false</span>
      
      <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></span>
        <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='ivar'>@definition</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
          <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      
      <span class='kw'>else</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNEXPECTED TYPE OF DEFINITION: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># Try to satisfy the conjunction of the definition of the Rule for a given Goal.
</span>  <span class='comment'># A conjunction is a sequence of expressions where the sequence is true
</span>  <span class='comment'># if all the expressions are true.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param goal [Porolog::Goal] the given Goal for the Rule.
</span>  <span class='comment'># @param subgoal [Porolog::Goal] the subgoal for the Rule&#39;s definition.
</span>  <span class='comment'># @param conjunction [Array] the conjunction to satisfy.
</span>  <span class='comment'># @param block [Proc] code to perform when the definition is satisfied.
</span>  <span class='comment'># @return [Boolean] whether the definition was satisfied.
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_arguments'>arguments</span>   <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_conjunction'>conjunction</span> <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    
    <span class='comment'># -- Handle non-Arguments --
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_arguments'>arguments</span>
      <span class='kw'>when</span> <span class='symbol'>:CUT</span><span class='comma'>,</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CUTTING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        
        <span class='kw'>if</span> <span class='id identifier rubyid_arguments'>arguments</span> <span class='op'>==</span> <span class='symbol'>:CUT</span>
          <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_terminate!'>terminate!</span>
          <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TERMINATED by </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        
        <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
        
      <span class='kw'>when</span> <span class='kw'>false</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Unify Subgoal --
</span>    <span class='id identifier rubyid_subsubgoal'>subsubgoal</span>   <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variables'>variables</span>    <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span> <span class='op'>+</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
    <span class='id identifier rubyid_unified'>unified</span>      <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    
    <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span>
      
      <span class='id identifier rubyid_unification'>unification</span> <span class='op'>=</span> <span class='id identifier rubyid_unify'>unify</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_unified'>unified</span>   <span class='op'>&amp;&amp;=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_unification'>unification</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
        <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>+=</span> <span class='id identifier rubyid_unification'>unification</span>
      <span class='kw'>else</span>
        <span class='comment'>#:nocov:
</span>        <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t unify: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> WITH </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span>
        <span class='comment'>#:nocov:
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Instantiate Unifications --
</span>    <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;=</span> <span class='id identifier rubyid_instantiate_unifications'>instantiate_unifications</span><span class='lparen'>(</span><span class='id identifier rubyid_unifications'>unifications</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
    
    <span class='comment'># -- Satisfy Subgoal --
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='comment'># -- Uninstantiate --
</span>    <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
    
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="reset-class_method">
  
    .<strong>reset</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears all Rules.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>success</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 30</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
  <span class='cvar'>@@rules</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns pretty representation.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>pretty representation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='ivar'>@arguments</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>:- </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="myid-instance_method">
  
    #<strong>myid</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convenience method for testing/debugging</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>pretty identification</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_myid'>myid</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rule</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='cvar'>@@rules</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1000</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="satisfy-instance_method">
  
    #<strong>satisfy</strong>(goal, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Try to satisfy the Rule for the given Goal.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>goal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Goal in which to satisfy this Rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>code to perform when the Rule is satisfied.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the success of deleting the subgoal.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subgoal'>subgoal</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Goal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Goal.html#initialize-instance_method" title="Porolog::Goal#initialize (method)">new</a></span></span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='comma'>,</span> <span class='id identifier rubyid_goal'>goal</span>
  
  <span class='id identifier rubyid_unified_goals'>unified_goals</span> <span class='op'>=</span> <span class='id identifier rubyid_unify_goals'>unify_goals</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_unified_goals'>unified_goals</span>
    <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Dead-end: Cannot unify with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="satisfy_conjunction-instance_method">
  
    #<strong>satisfy_conjunction</strong>(goal, subgoal, conjunction, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Try to satisfy the conjunction of the definition of the Rule for a given Goal. A conjunction is a sequence of expressions where the sequence is true if all the expressions are true.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>goal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the given Goal for the Rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>subgoal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the subgoal for the Rule&#39;s definition.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>conjunction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the conjunction to satisfy.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>code to perform when the definition is satisfied.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>whether the definition was satisfied.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 109</span>

<span class='kw'>def</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_arguments'>arguments</span>   <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_conjunction'>conjunction</span> <span class='op'>=</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  
  <span class='comment'># -- Handle non-Arguments --
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_arguments'>arguments</span>
    <span class='kw'>when</span> <span class='symbol'>:CUT</span><span class='comma'>,</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CUTTING </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_goal'>goal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      
      <span class='kw'>if</span> <span class='id identifier rubyid_arguments'>arguments</span> <span class='op'>==</span> <span class='symbol'>:CUT</span>
        <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_terminate!'>terminate!</span>
        <span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_calling_goal'>calling_goal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TERMINATED by </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      
      <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>
      
    <span class='kw'>when</span> <span class='kw'>false</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  
  <span class='comment'># -- Unify Subgoal --
</span>  <span class='id identifier rubyid_subsubgoal'>subsubgoal</span>   <span class='op'>=</span> <span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_goal'>goal</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_variables'>variables</span>    <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span> <span class='op'>+</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_variables'>variables</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='id identifier rubyid_unified'>unified</span>      <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  
  <span class='id identifier rubyid_variables'>variables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_variable'>variable</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_variable'>variable</span>
    
    <span class='id identifier rubyid_unification'>unification</span> <span class='op'>=</span> <span class='id identifier rubyid_unify'>unify</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_unified'>unified</span>   <span class='op'>&amp;&amp;=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_unification'>unification</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
      <span class='id identifier rubyid_unifications'>unifications</span> <span class='op'>+=</span> <span class='id identifier rubyid_unification'>unification</span>
    <span class='kw'>else</span>
      <span class='comment'>#:nocov:
</span>      <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t unify: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> WITH </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_content'> AND </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_myid'>myid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>break</span>
      <span class='comment'>#:nocov:
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># -- Instantiate Unifications --
</span>  <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;=</span> <span class='id identifier rubyid_instantiate_unifications'>instantiate_unifications</span><span class='lparen'>(</span><span class='id identifier rubyid_unifications'>unifications</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_unified'>unified</span>
  
  <span class='comment'># -- Satisfy Subgoal --
</span>  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_unified'>unified</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_satisfy'>satisfy</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='comma'>,</span> <span class='id identifier rubyid_conjunction'>conjunction</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'># -- Uninstantiate --
</span>  <span class='id identifier rubyid_subsubgoal'>subsubgoal</span><span class='period'>.</span><span class='id identifier rubyid_delete!'>delete!</span>
  
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="satisfy_definition-instance_method">
  
    #<strong>satisfy_definition</strong>(goal, subgoal, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Try to satisfy the definition of the Rule for a given Goal.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>goal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the given Goal for the Rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>subgoal</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Goal.html" title="Porolog::Goal (class)">Porolog::Goal</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the subgoal for the Rule&#39;s definition.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>code to perform when the definition is satisfied.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>whether the definition was satisfied.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/porolog/rule.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_satisfy_definition'>satisfy_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='ivar'>@definition</span>
    <span class='kw'>when</span> <span class='const'>TrueClass</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_subgoal'>subgoal</span><span class='rparen'>)</span>
      <span class='kw'>true</span>
    
    <span class='kw'>when</span> <span class='const'>FalseClass</span>
      <span class='kw'>false</span>
    
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span></span>
      <span class='id identifier rubyid_satisfy_conjunction'>satisfy_conjunction</span><span class='lparen'>(</span><span class='id identifier rubyid_goal'>goal</span><span class='comma'>,</span> <span class='id identifier rubyid_subgoal'>subgoal</span><span class='comma'>,</span> <span class='ivar'>@definition</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_solution_goal'>solution_goal</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Rule/DefinitionError.html" title="Porolog::Rule::DefinitionError (class)">DefinitionError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNEXPECTED TYPE OF DEFINITION: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='ivar'>@definition</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jul  6 22:54:46 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.6.5).
</div>

    </div>
  </body>
</html>